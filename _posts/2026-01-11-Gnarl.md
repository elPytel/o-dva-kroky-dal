---
layout: post
title: "Gnarl"
description: Vlastní karetní hra Gnarl
categories: ["TTG", "Gnarl"]
thumbnail: https://github.com/elPytel/Gnarl/raw/main/assets/Gnarl-logo_large.png
---

- [Github: Gnarl](https://github.com/elPytel/Gnarl)

![Logo](https://github.com/elPytel/Gnarl/raw/main/assets/Gnarl-logo_large.png)

Hra má prvky deck-buildingu a je určena pro 2-4 hráče. Jste hrdinové, kteří se snaží vybojovat slávu a bohatsví v nebezpečném světě plném monster a výzev.

![Box Art](https://github.com/elPytel/Gnarl/raw/main/assets/Gnarl_box_art.png)

## 5.1.

V `XSD` je popsána struktura karet. Pro uložení informací o kartičkách jsem využil `xml` soubor. Rozhodoval jsem se nad formáty:
- json,
- yaml,
- xml.

Nakonec jsem zvolil `xml`, protože jsem chtěl využít `xsd` schéma pro validaci dat.

Momentálně používám `python` skript pro generování karet z `xml` souboru. Skript je docela velký a pro různý typy karet si žádal specifické úpravy. S každým dalším balíčkem všechno neuměrně rostlo.

Karty generuji jako rub a líc (na další listy pro tisk). Až budu mít hotový návrh, tak použijeme naší černobílou tiskárnu Brother DCP-1610W pro tisk karet.

## 11.1. 

Přidal jsem `xslt` transformaci pro generování karet do `html`, pro tisk do formátu `.PDF` pomocí prohlížeče.

`xml` pipeline:
- `xsd` - schéma karet,
- `xml` - data o kartách,
- `xsl` - transformace do `html`,
- `css` - stylování karet pro tisk.

Rozšířil jsem `makefile` o cíle pro generování `html` a `pdf` z dat.

Vygenerovat PDF s kartami (líc + rub) lze příkazem:
```bash
make pdf
```

`xml` pipeline:
```txt
pdf -> html -> merge -> validate -> cards/*xml
```

Mám dvě `xsl` šablony:
- pro generování karet do `html` pro tisk,
- pro generování tabulky karet do `html` pro web.

Transformace pro generování karet má kolem 1000 řádků, ale i tak je mnohem přehlednější než původní Python skript.

> [!tip]
> Příští hry budu dělat rouvnou pomocí xslt transformací.

## 19.1.

S Podávkou a Najmanem jsme zašli do "Žita" dnes "Dčko" na pivo a zahrát si Gnarl. Po 3,5 hodinách hraní jsme se dostali do pokročílé střední fáze hry. Budu muset přijít na způsob jak urychlit začátek hry. Herní mechaniky jsou dobré, ale bude potřeba upravit některé věci. 

Momentálně je potřeba posílit zloděje (udělám z něj vraha — rogue), protože je hodně slabý. Upravím vyvážení balíčků, aby nebylo tolik karet pouze pro čaroděje.

Musím udělat lepší rozložení karet, aby pokryly všechny herní fáze.

Přidám více zboží a předmětů, aby bylo z čeho vybírat.

Ve městě budou hráči moci navštívit dva obchodníky místo jednoho, aby měli motivaci vůbec město najít.

Konec hry zkrátím z 5 úkolů na 3 (pro rychlejší úvodní hru).

Mince hráčům nebudou překážet v ruce.

Celý balíček "Prokletá země" přesunu do DLC.

Vytřídím duplicitní monstra a vyřadím ta, která dostatečně nezapadají do slovanského folklóru.
